(author : Fernand Veilleux)
o<facing> sub
(CALL [#begin_x] [#end_x] [#begin_z] [#end_z] [#finishing_passes] [#set_to_0])
	
	#<begin_x>          = #1
	#<end_x>            = #2
	#<begin_z>          = #3
	#<end_z>            = #4
	#<finishing_passes> = #5

	o151 if [#<end_x> GT #<begin_x>]
		(debug,Facing: End X must be less than Begin X)
		(print,)
		(print,Facing: End X must be less than Begin X)
		(AXIS,notify,Facing: End X must be less than Begin X)
		o<facing> return
	o151 endif

    / G0 X#<begin_x> Z#<end_z>
    / F10
    / G1 X#<end_x>
	/ o<facing> return

	#<cut_rough_total> = ABS[#<begin_z> - #<end_z>]
	o10 if [#<finishing_passes> GT 0]
		#<cut_rough_total> = [#<cut_rough_total> - #<_finish_cut>]
	o10 endif

	#<rough_passes> = FUP[#<cut_rough_total> / #<_rough_cut>]
	o11 if [#<rough_passes> GT 0]
		#<each_cut> = [#<cut_rough_total> / #<rough_passes>]
	o11 elseif [#<rough_passes> LT 0]
;		o<facing> return
	o11 endif

	o13 if [#<begin_z> GT #<end_z>]
		#<z_factor> = 1
		o<in_list> CALL [#5413] [5] [0] [2] [3] [7] [9]
		o998 if [#<_in_list> EQ 0]
			(debug,Facing: Cutter orientation should be 7, 2, 9, 3 or None)
			(print,)
			(print,Facing: Cutter orientation should be 7, 2, 9, 3 or None)
			(AXIS,notify,Facing: Cutter orientation should be 7 or 2 or 9 or 3 or None)
;			o<facing> return
		o998 endif
	o13 else
		#<z_factor> = -1
		o<in_list> CALL [#5413] [5] [0] [1] [4] [5] [9]
		o999 if [#<_in_list> EQ 0]
			(debug,Facing: Cutter orientation should be 5, 1, 9, 4 or None)
			(print,)
			(print,Facing: Cutter orientation should be 5, 1, 9, 4 or None)
			(AXIS,notify,Facing: Cutter orientation should be 5 or 1 or 9 or 4 or None)
;			o<facing> return
		o999 endif
	o13 endif
	
	G0 Z[#<begin_z> + #<_z_rapid> * #<z_factor>]
;	G0 X[#<begin_x>]
	M#<_cooling_mode>
	
	o121 if [#<_tool_usage> LE 1]
		F#<_rough_feed>
		#<z> = #<begin_z>
		o12 repeat [#<rough_passes>]
			#<z> = [#<z> - #<each_cut> * #<z_factor>]
			G0 X#<begin_x>
			G0 Z#<z>
			G1 X#<end_x>
			G0 Z[#<z> + #<_z_clear> * #<z_factor>]
		o12 endrepeat
	o121 endif

	o20 if [#<finishing_passes> AND [#<_tool_usage> NE 1]]
		F#<_finish_feed>
		o21 repeat [#<finishing_passes>]
			G0 X#<begin_x>
			G0 Z#<end_z>
			G1 X#<end_x>
			G0 Z[#<end_z> + #<_z_clear> * #<z_factor>]
		o21 endrepeat
	o20 endif
	
	M9 (cooling off)
	
	G0 X[#<_wp_dia_od> + #<_x_rapid>]
	G0 Z[#<end_z>]
    o30 if [#6 EQ 1]
        G10 L20 P#5220 Z0.0
    o30 endif

o<facing> endsub
